<!-- 챕터 3: 컨트랙트와 대화하기
    이제 메타마스크의 Web3 프로바이더로 Web3.js를 초기화했으니, 우리의 스마트 컨트랙트와 통신을 할 수 있도록 만들어보지.
    Web3.js는 자네의 스마트 컨트랙트와 통신을 위해 2가지를 필요로 할 것이네: 컨트랙트의 _주소_와 ABI이지.

    _컨트랙트 주소
    스마트 컨트랙트를 모두 작성한 후, 자네는 그걸 컴파일한 후 이더리움에 배포할 것이네. 배포는 다음 레슨에서 다룰 것이네. 
    이는 코드를 작성하는 것과는 꽤나 다른 절차이기 때문에, 순서를 바꿔 Web3.js를 먼저 다루기로 한 것이지.
    
    컨트랙트를 배포한 후, 해당 컨트랙트는 영원히 존재하는, 이더리움 상에서 고정된 주소를 얻을 것이네. 
    레슨2를 상기해보면, 이더리움 메인넷에서 크립토키티의 주소는 0x06012c8cf97BEaD5deAe237070F9587f8E7A266d였지.
    자네의 스마트 컨트랙트와 통신을 하기 위해 배포 후 이 주소를 복사해야 할 것이네.

    _컨트랙트 ABI
    자네 컨트랙트와의 통신을 위해 Web3.js에서 필요로 하는 다른 하나는 바로 컨트랙트의 ABI이네.
    ABI는 Application Binary Interface의 줄임말이네. 기본적으로 JSON 형태로 자네 컨트랙트의 메소드를 표현하는 것이지. 
    자네 컨트랙트가 이해할 수 있도록 하려면 Web3.js가 어떤 형태로 함수 호출을 해야 하는지 알려주는 것이지.

    이더리움에 배포하기 위해 컨트랙트를 컴파일할 때(레슨 7에서 다룰 내용이지), 솔리디티 컴파일러가 자네에게 ABI를 줄 것이네. 
    그러니 컨트랙트 주소와 함께 이를 복사하여 저장해야 하겠지.

    우리가 아직 배포를 다루지 않았기 때문에, 이번 레슨에서 내가 자네를 위해 ABI를 컴파일하여 cryptozombies_abi.js라는 파일의 cryptoZombiesABI 변수에 저장해 놓았네.
    cryptozombies_abi.js를 우리 프로젝트에 포함하면, 해당 변수를 사용하여 크립토좀비 ABI에 접근할 수 있을 것이네.

    _Web3.js 컨트랙트 인스턴스화하기
    컨트랙트의 주소와 ABI를 얻고 나면, 자네는 다음과 같이 Web3에서 인스턴스화할 수 있네:
    // myContract 인스턴스화
    var myContract = new web3js.eth.Contract(myABI, myContractAddress);

    _직접 해보기
    1. 우리 문서의 <head>에서, cryptozombies_abi.js를 포함하도록 또 다른 스크립트 태그를 써서 우리가 ABI 정의를 우리 프로젝트에 가져올 수 있도록 하게.
    2. <body>의 <script> 태그 시작 부분에서, cryptoZombies라는 이름으로 var를 선언하고 어떤 값도 아직 핟당은 하지 말게. 추후 이 변수를 우리의 인스턴스화된 컨트랙트를 저장하는 데에 사용할 것이네.
    3. 다음으로, startApp()이라는 이름으로 function을 만들게. 내용 부분은 다음 2단계로 나누어 채울 것이네.
    4. startApp()이 처음으로 해야 할 것은 cryptoZombiesAddress라는 이름으로 var를 선언하고 여기에 "YOUR_CONTRACT_ADDRESS"를 할당하는 것이네(이는 메인넷에서 크립토좀비 컨트랙트의 주소이네).
    5. 마지막으로, 우리 컨트랙트를 인스턴화하도록 하지. 우리가 위의 예제 코드에서 했던 것처럼 cryptoZombies에 새 web3js.eth.Contract를 할당하게(스크립트 태그를 통해 가져오는 cryptoZombiesABI와 위의 cryptoZombiesAddress를 사용하게).
-->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>CryptoZombies front-end</title>
    <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="web3.min.js"></script>
    <script language="javascript" type="text/javascript" src="cryptozombies_abi.js"></script>
  </head>
  <body>

    <script>
      // 2. 여기서 코딩을 시작하게
      var cryptoZombies;
      function startApp(){
        var cryptoZombiesAddress = "YOUR_CONTRACT_ADDRESS";
        cryptoZombies = new web3js.eth.Contract(cryptoZombiesABI, cryptoZombiesAddress);
      }

      window.addEventListener('load', function() {

        // Web3가 브라우저에 주입되었는지 확인(Mist/MetaMask)
        if (typeof web3 !== 'undefined') {
          // Mist/MetaMask의 프로바이더 사용
          web3js = new Web3(web3.currentProvider);
        } else {
          // 사용자가 Metamask를 설치하지 않은 경우에 대해 처리
          // 사용자들에게 Metamask를 설치하라는 등의 메세지를 보여줄 것
        }

        // 이제 자네 앱을 시작하고 web3에 자유롭게 접근할 수 있네:
        startApp()

      })
    </script>
  </body>
</html>

